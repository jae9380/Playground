#Java #CalssLoader
# *CalssLoader*   
## CalssLoader? ê·¸ê²Œ ë­ í•˜ëŠ” ë†ˆì¸ë””â€¦
![](https://i.postimg.cc/YCvfQ5G5/388da08665aa77ed364175496b337696.jpg)
### CalssLoaderì˜ ê°œë…

ìë°”ì—ì„œ ì‚¬ìš©ë˜ëŠ” **CalssLoader**ëŠ” í´ë˜ìŠ¤ íŒŒì¼(.class) íŒŒì¼ì„ ì½ì–´ JVMì˜ Method Areaì— ì ì¬í•˜ëŠ” ì—­í™œì„ í•œë‹¤.  
ì¦‰, ìš°ë¦¬ê°€ .java íŒŒì¼ì„ ì‘ì„±í•˜ê³  ì»´íŒŒì¼í•œ .class íŒŒì¼ì´ **ì‹¤ì œë¡œ JVM ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆë„ë¡** í•˜ëŠ” **ì…êµ¬ ì—­í• **ì„ í•œë‹¤. 


> ## **ğŸ•µWhat do the .java & .class files mean??**
**CalssLoader** ê°œë…ì„ ì´ì•¼ê¸° í•  ë–„ .javaíŒŒì¼ê³¼ .classíŒŒì¼ì´ ë‚˜ì˜¨ë‹¤. ê·¸ëŸ°ë° í•´ë‹¹ íŒŒì¼ë“¤ì€ ë¬´ì—‡ì¸ì§€ ëª¨ë¥¼ ìˆ˜ ìˆë‹¤.  ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê°„ë‹¨í•˜ê²Œ í™•ì¸í•˜ê³  ë„˜ì–´ê°€ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.

ë§Œì•½ ìë°” ê°œë°œì„ í•´ë´¤ë‹¤ë©´ .java íŒŒì¼ê³¼ .classíŒŒì¼ì€ í•œ ë²ˆì¯¤ ë³´ì•˜ì„ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ìë°” íŒŒì¼ì€ **ìë°” ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì†ŒìŠ¤ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì†ŒìŠ¤ì½”ë“œê°€ ì‘ì„±ëœ íŒŒì¼**ì„ ì˜ë¯¸í•œë‹¤. 

![](https://i.postimg.cc/R0VZgpkC/scode-mtistory2-fname-https-blog-kakaocdn-net-dn-XL21-E-btrt-H06o7v-B-t-Yg5-SKuqvr-Ru-Qlo-Yq-Byy4-K-img.png)

ê·¸ ë‹¤ìŒìœ¼ë¡œ í´ë˜ìŠ¤ íŒŒì¼ì€ ì‘ì„±ëœ **ìë°” íŒŒì¼ì„ ì»´íŒŒì¼**í•˜ê²Œ ë˜ë©´ ìƒì„±ë˜ëŠ” íŒŒì¼ì´ í´ë˜ìŠ¤ íŒŒì¼ ë˜ëŠ” ìë°” ë°”ì´íŠ¸ ì½”ë“œë¼ê³  ë¶€ë¥¸ë‹¤. ì´ íŒŒì¼ì€ JVMë§Œ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´, ì–¸ì œ ì–´ë””ì—ì„œ JAVAì–¸ì–´ë¡œ ì‘ì„±ëœ íŒŒì¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.


## **ğŸ¤” ê·¸ëŸ¬ë©´ JVMì— ì–´ë–¤ ê³¼ì •ìœ¼ë¡œ ì ì¬ í• ê¹Œ?**

í•´ë‹¹ ë™ì‘ ê³¼ì •ì€ ìë°”ë¥¼ ì´í•´í•˜ëŠ”ë° ìˆì–´ ì•„ì£¼ í•µì‹¬ì ì¸ ê°œë…ì´ë‹¤. ì•„ë˜ì˜ ë‹¨ê³„ëŠ” **JVMì´ í´ë˜ìŠ¤ë¥¼ ë¡œë“œ í•˜ëŠ” ê³¼ì •**ì´ë‹¤.

JAVAëŠ” **ë™ì  ë¡œë”©(Dynamic Loading)**ì„ í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤. ì´ëŠ” **ë™ì  ë¡œë”©ì„ ë‹´ë‹¹í•˜ëŠ” ë¶€ë¶„**ì´ **JVM**ì—ì„œ í´ë˜ìŠ¤ ë¡œë”ì´ë‹¤.     
ì¦‰, í´ë˜ìŠ¤ ë¡œë”ëŠ” JAVAë¡œ ì‘ì„±ëœ í”„ë¡œê·¸ë¨ì˜ ëŸ°íƒ€ì„ ì¤‘ **JVM**ì˜ Method Areaì˜ì—­ì— ë™ì ìœ¼ë¡œ ìë°” í´ë˜ìŠ¤ë¥¼ ì ì¬í•˜ëŠ” ì—­í™œì„ í•˜ëŠ” ê²ƒì´ë‹¤. 

ì ì¬í•˜ëŠ” ê³¼ì •ì—ì„œ í¬ê²Œ **Loading**, **Linking**, **Initialization**ì„ ê±°ì¹˜ê²Œ ëœë‹¤.

![](https://i.postimg.cc/K83NRQqz/1-Bs-LZHUe-5-Qv2tb-Hdz-U-TQ.webp)

### 1. Loading (í´ë˜ìŠ¤ ë¡œë”©)

í´ë˜ìŠ¤ íŒŒì¼ì„ ì°¾ì•„ì„œ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤. ë¶ˆëŸ¬ë“¤ì¸ í´ë˜ìŠ¤ íŒŒì¼ì€ ì ì ˆí•œ ë°”ì´íŠ¸ ì½”ë“œë¡œ ë§Œë“¤ì–´ **Method Area**ì— ì €ì¥ì„ í•˜ê²Œ ëœë‹¤. 

ì—¬ê¸°ì„œ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ì—­í™œì€ **Class Loader**ê°€ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤. ì´ **Class Loader**ëŠ” **ë¶€ëª¨-ìì‹ í˜•íƒœì˜ ê³„ì¸µ êµ¬ì¡°**ë¡œ ì„¤ê³„ë˜ì–´ ìˆìœ¼ë©°, ë¡œë”© ê³¼ì •ì—ì„œ **â€œë¶€ëª¨ ë¨¼ì € ê²€ìƒ‰â€** ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤. ì´ë¥¼ **Parent Delegation Model**ì´ë¼ ë¶€ë¦…ë‹ˆë‹¤.

```
// before java version 8.
[Bootstrap ClassLoader]
        â†“
[Extension ClassLoader]
        â†“
[Application (System) ClassLoader]

// after java version 9.
[Bootstrap ClassLoader]
        â†“
[Platform ClassLoader]   â† Java 9 ì‹ ì„¤!
        â†“
[System (Application) ClassLoader]
```

ìë°” 9 ë²„ì „ ì´í›„ë¡œ ë¶€í„°ëª¨ë“ˆ ì‹œìŠ¤í…œ(Jigsaw)ì´ ë„ì… ë˜ë©´ì„œ **Platform ClassLoader**ì™€ **System ClassLoader**ë¡œ êµ¬ì¡°ê°€ ë°”ë€Œì—ˆë‹¤.

_**Class Loader**ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë’¤ì—ì„œ ì•Œì•„ë³´ì_

### 2. Linking (ë§í‚¹)

**Linking**ì—ì„œ 3ë‹¨ê³„ë¥¼ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ëœë‹¤. ê° ë‹¨ê³„ëŠ” **Verification**, **Preparation**, **Resolution**ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤.

* Verification   
  **JVM**ì´ ì½ì–´ì˜¨ í´ë˜ìŠ¤ íŒŒì¼ì´ ìœ íš¨í•œ ë°”ì´íŠ¸ ì½”ë“œì¸ì§€ ê²€ì¦í•œë‹¤.

* Preparation    
  í´ë˜ìŠ¤ì— ì„ ì–¸ëœ **static** ë³€ìˆ˜ì— ê¸°ë³¸ê°’ì„ í• ë‹¹í•œë‹¤.    

* Resolution    
  ë‹¤ë¥¸ í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œ í•„ë“œ ë“±ì— ëŒ€í•œ ì‹¬ë³¼ë¦­ ì°¸ì¡°ì—ì„œ ì‹¤ì œ ì°¸ì¡°ë¡œ ë³€ê²½í•œë‹¤.    


### 3. Initialization (ì´ˆê¸°í™”)

**Initialization** ë‹¨ê³„ì—ì„œ í´ë˜ìŠ¤ì˜ **static**ì´ˆê¸°í™” ë¸”ëŸ­ê³¼ **static** ë³€ìˆ˜ì— ì‹¤ì œ ì½”ë“œì—ì„œ ì •ì˜ëœ ê°’ë“¤ì´ í• ë‹¹í•˜ê²Œ ëœë‹¤.    
ì¦‰, `static {...}`ë¸”ëŸ­ê³¼ `static ë³€ìˆ˜ = ê°’`ê°™ì€ ì½”ë“œê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì ì´ë‹¤.    

ì´ ê³¼ì •ì„ ê±°ì¹œ í›„, í´ë˜ìŠ¤ëŠ” **JVM**ì˜ **Method Area**ì— ì™„ì „íˆ ì¤€ë¹„ëœ ìƒíƒœë¡œ ì¡´ì¬í•˜ê²Œ ë˜ë©°, í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì´ë‚˜ ë©”ì„œë“œ í˜¸ì¶œì´ ê°€ëŠ¥í•´ì§„ë‹¤.


ìµœì¢…ì ìœ¼ë¡œ ìë°” í´ë˜ìŠ¤ëŠ” **JVM**ì—ì„œ **Loading** -> **Linking** -> **Initialization** ê³¼ì •ì„ í†µí•´ì„œ ë©”ëª¨ë¦¬ì— ì ì¬ëœë‹¤.    

**JVM**ì€ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ë„ì¤‘ì—ë„ í•„ìš”í•œ í´ë˜ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œë¼ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

ì´ëŸ¬í•œ ë™ì  ë¡œë”© êµ¬ì¡°ëŠ” ìë°”ì˜ ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì´ëŠ” í•µì‹¬ì ì¸ ì„¤ê³„ì´ì, **JVM**ì´ ë©”ëª¨ë¦¬ì™€ í´ë˜ìŠ¤ ê´€ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê¸°ë°˜ì´ ëœë‹¤.    

---

## Class Loader

ì¼ë‹¨ ìë°” ë²„ì „ìš¸ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–»ê²Œ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸ì„ í•˜ì    

#### ìë°” 8 ì´ì „ì˜ Class Loader

1. Bootstrap ClassLoader
   * ê°€ì¥ ìµœìƒìœ„ ë¡œë”
   * JVMì— ë‚´ì¥ë˜ì–´ ìˆì–´ **ìë°”ë¡œ êµ¬í˜„ë˜ì§€ ì•Šê³  C/C++ë¡œ ì‘ì„±ë¨**
   * rt.jar ë“± **Java í•µì‹¬ í´ë˜ìŠ¤**(ì˜ˆ: java.lang.*, java.util.*)ë¥¼ ë¡œë“œ
   * null ê°’ìœ¼ë¡œ ë‚˜íƒ€ë‚¨ (ClassLoader.getSystemClassLoader().getParent() â†’ null)

2. Extension ClassLoader (â‰’ Platform)
   * JAVA_HOME/lib/ext ë””ë ‰í† ë¦¬ì— ìˆëŠ” JAR íŒŒì¼ë“¤ì„ ë¡œë“œ
   * í™•ì¥ ê¸°ëŠ¥ì´ë‚˜ ë³´ì¡°ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—¬ê¸°ì— ë„£ì–´ ì‚¬ìš©í•¨
   * ì‚¬ìš©ì ì»¤ìŠ¤í„°ë§ˆì´ì§• í™•ì¥ì„ ìœ„í•œ ìš©ë„ë¡œ ì œê³µë¨

3. Application (System) ClassLoader
   * ìš°ë¦¬ê°€ ë§Œë“  í´ë˜ìŠ¤(.class), ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(JAR) ë“±ì„ **classpath**ë¡œë¶€í„° ë¡œë“œ
   * ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ ë¡œë”

#### ìë°” 9 ì´í›„ì˜ Class Loader

1. Bootstrap ClassLoader
   * ë™ì¼í•˜ê²Œ Java í•µì‹¬ í´ë˜ìŠ¤ ë¡œë“œ
   * java.base ëª¨ë“ˆì˜ í´ë˜ìŠ¤ë“¤ì´ ì—¬ê¸°ì—ì„œ ë¡œë“œë¨

2. Platform ClassLoader (ğŸ’¡ New in Java 9)
   * **ê¸°ì¡´ Extension ClassLoader ëŒ€ì²´**
   * java.sql, java.xml, java.logging ë“± JDKì˜ ì¼ë¶€ **í‘œì¤€ í”Œë«í¼ API ëª¨ë“ˆ**ë“¤ì„ ë¡œë“œ
   * ì‚¬ìš©ì ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì™€ëŠ” ë³„ê°œì˜ í´ë˜ìŠ¤ ë¡œë”© ì±…ì„ì„ ê°€ì§

3. System (Application) ClassLoader
   * ì‚¬ìš©ì ì½”ë“œì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ë¡œë”© (classpathì— ìˆëŠ” í´ë˜ìŠ¤)
   * Java 8ê³¼ ë™ì¼í•œ ê¸°ëŠ¥ì´ì§€ë§Œ, ìƒìœ„ê°€ Platform ClassLoaderë¡œ ë³€ê²½ë¨

> #### ë²„ì „ 8 ì „ê³¼ ë²„ì „ 9 ì´í›„ ìƒìœ„ì— ìˆëŠ” Bootstrap Class Lodaerì€ ê°™ì€ Bootstrap Class Loaderì¸ê°€ìš”? ğŸ¤”ğŸ¤”

ì• ì„í•˜ê²Œë„ ì™„ë²½í•˜ê²Œ ê°™ë‹¤ê³  ë§í•  ìˆ˜ ì—†ë‹¤. 

ê·¸ëŸ¬ë©´ ì–´ë–¤ ë¶€ë¶„ì—ì„œ ì°¨ì´ì ì„ ë³´ì´ëŠ” ê²ƒì¼ê¹Œ? 

**Java 8 ì´ì „ê³¼ Java 9 ì´í›„ì˜ Bootstrap ClassLoaderëŠ” ê¸°ë³¸ì ì¸ ì—­í• ê³¼ ê°œë…ì€ ë™ì¼í•©ë‹ˆë‹¤.**
**ê·¸ëŸ¬ë‚˜** Java 9ë¶€í„° ë„ì…ëœ **ëª¨ë“ˆ ì‹œìŠ¤í…œ (JPMS)** ë•Œë¬¸ì— **ë™ì‘í•˜ëŠ” ë°©ì‹ì´ë‚˜ ë¡œë”©í•˜ëŠ” ëŒ€ìƒì´ ì•½ê°„ ë‹¬ë¼ì¡ŒìŠµë‹ˆë‹¤.**

ìµœìƒìœ„ í´ë˜ìŠ¤ ë¡œë”ë¡œì„œ ë‹¤ìŒê³¼ ê°™ì€ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.

| **ì—­í• ** | **ì„¤ëª…** |
|:-:|:-:|
| **í•µì‹¬ API í´ë˜ìŠ¤ ë¡œë“œ** | java.lang, java.util ë“± ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” í´ë˜ìŠ¤ ë¡œë”© |
| **JVM ë‚´ì¥** | C/C++ë¡œ êµ¬í˜„ë˜ì–´ ìˆê³ , ìë°” ì½”ë“œì—ì„œ ì§ì ‘ ë‹¤ë£° ìˆ˜ ì—†ìŒ |
| **ë¶€ëª¨ ìœ„ì„ êµ¬ì¡°ì˜ ìµœìƒë‹¨** | ëª¨ë“  í´ë˜ìŠ¤ ë¡œë”ì˜ ë¶€ëª¨ì— í•´ë‹¹ (parent == null) |

### âœ… Java 8 ì´ì „ì˜ íŠ¹ì§•

Java 8 ì´ì „ì˜ **Bootstrap Class Loader**ëŠ” JAVA_HOME/jre/lib/rt.jar ê²½ë¡œì— ìœ„ì¹˜í•œ **rt.jar** íŒŒì¼ ë‚´ì˜ í´ë˜ìŠ¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
ëŒ€í‘œì ìœ¼ë¡œ java.lang.String, java.util.HashMap ë“± **JDKì˜ í•µì‹¬ í´ë˜ìŠ¤ë“¤**ì´ ì´ì— í•´ë‹¹ë©ë‹ˆë‹¤.

### âœ… Java 9 ì´í›„ì˜ ë³€í™”

Java 9ë¶€í„°ëŠ” **ëª¨ë“ˆ ì‹œìŠ¤í…œ(JPMS: Java Platform Module System)**ì´ ë„ì…ë˜ë©´ì„œ í´ë˜ìŠ¤ ë¡œë”© ë°©ì‹ì— í° ë³€í™”ê°€ ìƒê²¼ìŠµë‹ˆë‹¤.

ê¸°ì¡´ì—ëŠ” rt.jar íŒŒì¼ì— í¬í•¨ëœ ëª¨ë“  í•µì‹¬ í´ë˜ìŠ¤ë¥¼ Bootstrap ClassLoaderê°€ ë¡œë”©í–ˆì§€ë§Œ, Java 9ë¶€í„°ëŠ” **rt.jar íŒŒì¼ì´ ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°**, ëŒ€ì‹  **JDK ë‚´ë¶€ê°€ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ êµ¬ì„±**ë˜ì–´ lib/modulesì— ìœ„ì¹˜í•œ **jimage íŒŒì¼** ì•ˆì—ì„œ ëª¨ë“ˆë³„ë¡œ í´ë˜ìŠ¤ë“¤ì„ ê´€ë¦¬í•˜ê³  ë¡œë”©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.    


### Class Loader ë™ì‘ ë°©ì‹    

ìë°”ì—ì„œ í´ë˜ìŠ¤ëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ **í•„ìš”í•œ ì‹œì ì—ì„œ ë™ì **ìœ¼ë¡œ **JVM** ë©”ëª¨ë¦¬ì— ë¡œë“œëœë‹¤ê³  í–ˆê°€. ê·¸ë¦¬ê³  í´ë˜ìŠ¤ ë¡œë”©ì€ **Parent Delegation Model**ì´ë¼ëŠ” ë°©ì‹ì„ ë”°ë¥¸ë‹¤ê³  í–ˆë‹¤.    

> **ğŸ˜­ Parent Delegation Modelì€ ë˜ ë­ì•¼â€¦ã… ã… **

í´ë˜ìŠ¤ ë¡œë”ê°€ í´ë˜ìŠ¤ë¥¼ ë¡œë“œí•  ë•Œ **ìì‹ ë³´ë‹¤ ìƒìœ„ í´ë˜ìŠ¤ ë¡œë”ì—ê±° ë¨¼ì € ìš”ì²­**ì„ í•œë‹¤. 
ìƒìœ„ê°€ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ëª¨ë¥¼ ë•Œ ìì‹ ì´ ì§ì ‘ ë¡œë“œë¥¼ í•˜ê²Œ ëœë‹¤.   

í•´ë‹¹ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë©´ **ë³´ì•ˆì„±ì´ ë†’ì•„ì§€ê³ **, í•µì‹¬ JAVA APIê°€ ì˜¤ì—¼ë˜ì§€ ì•Šë„ë¡ ë³´í˜¸í•  ìˆ˜ ìˆë‹¤.

  ```java
  ClassLoader cl = MyClass.class.getClassLoader();
  System.out.println(cl); // AppClassLoader
  System.out.println(cl.getParent()); // PlatformClassLoader
  System.out.println(cl.getParent().getParent()); // null (Bootstrapì€ ë„¤ì´í‹°ë¸Œë¡œ êµ¬í˜„ë˜ì–´ ìˆìŒ)
  ```

#### í´ë˜ìŠ¤ ë¡œë”©ì˜ ì˜ˆì™¸ ìƒí™©

**Parent Delegation Model**ì€ ì¼ë°˜ì ìœ¼ë¡œ ë³´ì•ˆìƒ ìœ ë¦¬í•˜ì§€ë§Œ, ëª‡ëª‡ ê²½ìš°ì—ëŠ” ì´ ì›ì¹™ì´ ì§€ì¼œì§€ì§€ ì•ŠëŠ”ë‹¤.    

ëŒ€í‘œì ìœ¼ë¡œ ë‘ ìƒí™©ì´ ìˆë‹¤.   
* Web Application ì„œë²„
  ì—¬ëŸ¬ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‹œì— ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡, ê° ì•±ë§ˆë‹¤ ë³„ë„ì˜ í´ë˜ìŠ¤ ë¡œë”ë¥¼ ì‚¬ìš©í•˜ë©°, ì¼ë¶€ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ë¡œë”©í•˜ê¸°ë„ í•œë‹¤.

* Custom ClassLoader ì‚¬ìš© ì‹œ
  íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²©ë¦¬í•˜ê±°ë‚˜ ë™ì ìœ¼ë¡œ ì½”ë“œë¥¼ ë¡œë”©í•  í•„ìš”ê°€ ìˆëŠ” ê²½ìš°, **Class Loader**ë¥¼ ì§ì ‘ êµ¬í˜„í•´ì„œ ë¡œë”© ë°©ì‹ì„ ë°”ê¾¸ê¸°ë„ í•œë‹¤.


### Custom Class Loader    

ìë°”ì˜ **Class Loader**ë¥¼ ìƒì†ë°›ì•„ **ì‚¬ìš©ì ì •ì˜ ë°©ì‹ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë¡œë”©**í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  í´ë˜ìŠ¤ì´ë‹¤.    
ìë°”ì˜ í´ë˜ìŠ¤ ë¡œë”© ë°©ì‹ì€ ë³´ì•ˆì„±ê³¼ ì•ˆì •ì„±ì€ ë›°ì–´ë‚˜ì§€ë§Œ, ì œí•œì ì¸ ìœ ì—°ì„± ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš°ì— ì§ì ‘ **Class Loader**ë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤.    

* í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ 
  ë™ì ìœ¼ë¡œ í”Œë¡œê·¸ì¸ í´ë˜ìŠ¤ë¥¼ ë¡œë“œ ë° ì–¸ë¡œë“œí•˜ê³ , ì„œë¡œ ë‹¤ì€ í´ë˜ìŠ¤ ë¡œë”ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ êµ¬ì„±

* í´ë˜ìŠ¤ ë²„ì „ ê²©ë¦¬
  ì„œë¡œ ë‹¤ë¥¸ ë²„ì „ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë™ì‹œì— ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°

* ì•”í˜¸í™”ëœ í´ë˜ìŠ¤ íŒŒì¼ ë¡œë”©
  í´ë˜ìŠ¤ íŒŒì¼ì„ ì•”í˜¸í™”í•´ì„œ ë°°í¬í•œ í›„ ë¡œë”© ì‹œ ë³µí˜¸í™”í•˜ì—¬ ì‹¤í–‰

* í…ŒìŠ¤íŠ¸ ë° ë¦¬í”Œë ‰ì…˜ ë„êµ¬
  ë™ì ìœ¼ë¡œ ìƒì„±ëœ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ë¡œë“œí•˜ê±°ë‚˜ ëŸ°íƒ€ì„ì— ìˆ˜ì •í•œ í´ë˜ìŠ¤ë¥¼ ì£¼ì…  

ê¸°ë³¸ì ìœ¼ë¡œ ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ ë¡œë”ë¥¼ ì‘ì„±í•  ë•Œ `Class Loader`í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ `findClass(Strinf name)` ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•œë‹¤. ëŒ€ë¶€ë¶„ `defineClass`ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°”ì´íŠ¸ ë°°ì—´ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.

```java
public class MyClassLoader extends ClassLoader {

    @Override
    protected Class<?> findClass(String name) throws ClassNotFoundException {
        try {
            // í´ë˜ìŠ¤ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ .class íŒŒì¼ì„ ì½ì–´ byte[]ë¡œ ë³€í™˜
            String path = "C:/classes/" + name.replace('.', '/') + ".class";
            byte[] classData = Files.readAllBytes(Paths.get(path));
            // byte[]ë¥¼ Classë¡œ ë³€í™˜
            return defineClass(name, classData, 0, classData.length);
        } catch (IOException e) {
            throw new ClassNotFoundException(name, e);
        }
    }
}
```

```java
public class Main {
    public static void main(String[] args) throws Exception {
        MyClassLoader loader = new MyClassLoader();
        Class<?> clazz = loader.loadClass("com.example.Hello");
        Object obj = clazz.getDeclaredConstructor().newInstance();
        Method method = clazz.getMethod("sayHello");
        method.invoke(obj); // Hello ì¶œë ¥
    }
}
```

#### Parent Delegation Model     
```java
@Override
public Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
    if (name.startsWith("com.plugin")) {
        return findClass(name); // ì§ì ‘ ë¡œë”©
    }
    return super.loadClass(name, resolve); // ë¶€ëª¨ì—ê²Œ ìœ„ì„
}
```

-----   