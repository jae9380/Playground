# Docker

## Docker

도커는 리눅스 컨테이너에 리눅스 어플리케이션을 포로세스 격리 기술을 사용하여 더 쉽게 컨테이너로 실행하고 관리할 수 있도록 해준다.

도커엔진(Docker Engine)은 컨테이너를 생성하고 관리하는 주체로 이 자체로도 컨테이너를 제어할 수 있고 다양한 기능을 제공하는 도커의 프로젝트이다.  
도커에 있는 여러 프로젝트들은 도커엔진을 좀 더 효율적으로 사용하기 위한 것이기 때문에 도커 엔진은 핵심적인 부분으로 보아도 무방하다.

### 도커의 등장 전/후

### 기존의 방식

도커가 등장하기 전에는 개발과 배포에는 주로 가상화 기술이나 전통적인 배포 방법을 진행했다.

기존의 배포 방식은 어플리케이션을 직접 물리 서버에 설치를 하고 실행을 하며, 라이버러리 및 종속성 관리가 복잡하고, 서로 다른 환경에서 일관된 실행을 보장하기는 어려웠다. 또한 배포 속도가 느리고 서버 자원을 사용하는데 있어서 비효율적으로 사용 된다.
다음으로 가상화 기숳은 하이퍼바이저를 사용하여 물리 서버에 다수의 가성 머신을 실행하고, 각 VM은 독립된 운영체제를 실행하여 격리된 환경을 제공했다.
VM 간의 자원 격리와 보안은 뛰어나지만, VM자체는 무겁고, 부팅 및 운영 시 리소스 사용량이 크다, 마지막으로 각 VM이 별도의 OS를 실행하므로, CPU,메모리 등의 자원을 많이 소비한다는 점이 있다.

### 도커의 등장

도커는 2013년에 등장하였다. 등장과 동시에 어플리케이션 개발 및 배포에 있어서 혁신적으로 변화를 가져왔다.  
도커가 인기를 얻었던 이유를 보자

- 일괄된 실행 환경
  - 컨테이너라는 독립된 환경에서 어플리케이션을 실행하여, 개발, 테스트, 프로덕션 환경에서 일관된 동작을 보장한다.
- 가벼운 컨테이너
  - 컨테이너는 VM보다 가볍다. 컨테이너는 호스트 OS의 커널을 공유하고, 최소한의 리소스로 어플리케이션을 실행한다.
- 효율적인 자원 사용
  - 컨테이너는 격리된 환경을 제공을 하고, 하나의 호스트에서 여러 컨테이너를 실행 할 수 있어, 서버의 자원 활용을 극대화 한다.
- 쉬운 배포 및 확장성
  - 이미지를 이용하여 패키징을 하고, 어디서나 동일한 이미지로 배포가 가능하다.
  - 컨테이너 오케스트레이션 도구 (Kubernetes, Docker Swarm 등..)를 사용하여 어플리케이션을 쉽게 확장 및 관리가 가능하다.
- 빠른 개발 및 배포
  - 어플리케이션을 컨테이너로 패키징을 하며, CI/CD 파이프라인에서 빠르고 일관된 빌드, 테스트, 배포가 가능하다.
- 모듈화 및 재사용성
  - 마이크로서비스 아키텍처에 적합하며, 어플리케이션을 여러 개의 독립된 컨테이너로 나눠 관리할 수 있다.
  - 컨테이너 이미지 레지스트리(Docker Hub)를 통하여 이미지를 공유할 수 있다.  
    이렇게 다양한 이유로 도커의 등장 시점 이후 많은 인기를 끌며 사용되고 있다.

## Virtual Macchines and Docker Conatiners

![](https://velog.velcdn.com/images/jae9380/post/4f762457-45e3-47d3-8673-32ed3f2809cc/image.png)

Virtual Macchines, Docker Conatiners 비교를 했을 때 내부적인 차이점이 있다.

첨부 이미지를 보자

가상머신은 응용 프로그램 소프트웨어, 종속성 게스트 OS가 내포되어 있다. 이것은 배포를 하게된다면 스택마다 별도의 가상머신과 게스트OS가 필요하다. 이렇게 된다면 다소 무거워 지면서 성능적인 부분에 커다린 짐덩이가 될 것이다.

가상머신과 달리 리눅스 위에 있는 도커는 호스트의 리눅스 OS를 사용하고 컨테이너는 프로세스 독립적으로 분리를 통하여 응용 프로그램 및 종속성을 모듈식인 컨테이너로 패키징을 한다. 이러한 부분으로 VM이 필요하지 않으며 각각의 컨테이너의 OS 리소스는 서로 공유가 된다. 그래서 CPU나 메모리를 자신이 필요로 하는 만큰 할당을 하게 되고 성능 손실이 거의 없도록 한다.

하지만 리눅스가 아닌 다른 OS위의 도커는 어떠할까?
이러한 상황에서 도커는 작동하기 위한 리눅스가 포함되어 있는 경량화된 VM이 필요하다. VM과 비교하여컨테이너의 수와 관계 없이 단일 VM 및 게스트 리눅스 시스템만을 필요로 한다는 장점이 있다.
