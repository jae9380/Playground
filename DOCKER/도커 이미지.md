# Docker Image

모든 도커의 컨티너는 이미지를 기반으로 생성됙 때문에 이미지에 관련하여 알고 있는 것이 바람직하다.   

데미안 운영체제에서 `apt-get insatll`을 실행하면 apt 리포지터리에서 패키지를 다운받고 레드헷 운영체제에서 `yum insatll`을 실행하면 yum 리포지터리에서 패키지를 내려받는 것과 유사하게 
도커는 기본적으로 `Docker Hub`라는 중앙 이미지 저장소에서 이미지를 받는다. 이 도커 허브는 도커가 공식적으로 제공하고 있다.   

`docker create, docker run, docker pull`의 명령어로 이미지를 내려 받을 때 도커는 도커 허브에서 해당 이미지를 찾아서 내려 받는다.   
대부분의 이미지는 도커 허브에서 공식적으로 제공하거나 (예를 들어서 ubunt, centos 등) 아니면 다른 사람이 허브에 올려둔 (예를 들어 Tomcat, Hadoop 등)것을 받기 때문에 직접적으로 이미지를 만들지 않아도 된다는 장점이 존재한다.

도커 허브에는 어떠한 이미지가 있는지 확인하기 위해서 직접 허브 사이트에 접속하여 찾을 수 있지만, 도커 엔진에서 `docker search`명령어를 사용하여 검색할 수 있다.

![](https://i.postimg.cc/k5LNtYHW/docker-search.png)


## 이미지 생성하기   

search를 이요하여 검색한 이미지를 pull로 다운을 받을 수 있지만, 컨테이너에 어플리케이션을 위한 특정한 개발 환경을 직접 구축을 하여 사용자만의 이미지를 생성을 해야한다.   

이제 이미지 생성하는 방법에 대하여 간단하게 설명을 하겠다.   

일단 run 명령어를 이용하여 컨테이너 하나를 생성해준다, 그리고 해당 컨테이너 내부에 변경점을 만들어 준다.
```shell
$ docker run -i -t --name my_first_image ubuntu:14.04

~~:# echo test_first >> first
```

변경점이 생성되었다면 commit명령어를 이용하여 이미지를 생성한다.   
```shell
$ docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]
```
형식으로 명령어를 작성하면 된다.

![](https://i.postimg.cc/RFyXTVbp/docker-commit.png)   
여기서 `-a` 옵션은 author을 뜻한다. 이는 이미지의 작성자를 나타내는 메타데이터를 이미지에 포함시킨다.   
 다음으로 `-m` 옵션은 커밋 메세지 옵션이다.   

![](https://i.postimg.cc/7ZhJqML7/docker-images.png)   
이미지들을 확인을 하면 방금 생성한 이미지가 잘 나타난다. 
